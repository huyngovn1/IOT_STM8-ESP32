package dayhocstem.com.remote_led_controller;
    import androidx.annotation.NonNull;
    import androidx.appcompat.app.AppCompatActivity;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.Toast;
    import com.google.firebase.database.DataSnapshot;
    import com.google.firebase.database.DatabaseError;
    import com.google.firebase.database.DatabaseReference;
    import com.google.firebase.database.FirebaseDatabase;
    import com.google.firebase.database.ValueEventListener;
    public class MainActivity extends AppCompatActivity {
    Button pushbtn, getbtn;
    EditText valueedt;
    FirebaseDatabase database;
    private DatabaseReference ref;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Ánh xạ các nút nhấn và edittext
    pushbtn = (Button) findViewById(R.id.Pushbutton);
    getbtn = (Button) findViewById(R.id.Getbutton);
    valueedt = (EditText) findViewById(R.id.LEDstatuseditText);
    // trỏ tới cơ sở dữ liệu
    database = FirebaseDatabase.getInstance();
    ref= database.getReference("ESP8266 NodeMCU Board/Outputs/Digital"); //"ESP8266 NodeMCU Board/Outputs/Digital"
    // xử lý khi nhấn Push button
    pushbtn.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
    // lấy dữ liệu từ edittext
    String ledstatus = valueedt.getText().toString();
    // đẩy lên trường LED trên firebase
    Toast.makeText(MainActivity.this, ledstatus, Toast.LENGTH_SHORT).show();
    ref.child("LED").setValue(ledstatus);
    }
    });
    // xử lý khi nhấn nút Get
    getbtn.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
    ref.child("LED").addValueEventListener(new ValueEventListener() {
    @Override
    public void onDataChange(@NonNull DataSnapshot snapshot) {
    // hiển thị data mới ra edittext
    Toast.makeText(MainActivity.this, "GET" + snapshot.getValue().toString(), Toast.LENGTH_SHORT).show();
    valueedt.setText(snapshot.getValue().toString());
    }
    @Override
    public void onCancelled(@NonNull DatabaseError error) {
    }
    });
    }
    });
    }
    }